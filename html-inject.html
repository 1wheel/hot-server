<!-- hot-server appends this snippet to inject code via a websock  -->
<script>
!(function(){

	var bc = new BroadcastChannel('file_update')

	bc.onmessage = msg => {
		console.log({msg})
	  var {path, type, str} = msg.data

	  if (type == 'js'){
	  	eval(str)
	  }
	  else if (type == 'css') {
	  	// TODO set inner text to skip network request
	    Array.from(document.querySelectorAll('link'))
	      .filter(d => d.href.includes(path))
	      .forEach(d => d.href = d.href)
	  } else {
	  	location.reload()
	  }
	}


})()
</script>